"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{446:function(t,e,r){r.d(e,{AuthProvider:function(){return i},a:function(){return s}});var a=r(7437),o=r(2265);let n=(0,o.createContext)(void 0);function i(t){let{children:e}=t,[r,i]=(0,o.useState)(null),[s,l]=(0,o.useState)(null),[c,u]=(0,o.useState)(!0),[d,f]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let t=localStorage.getItem("jb-fashions-user"),e=localStorage.getItem("jb-fashions-token");t&&e&&(i(JSON.parse(t)),l(e)),u(!1)},[]),(0,o.useEffect)(()=>{r&&s?(localStorage.setItem("jb-fashions-user",JSON.stringify(r)),localStorage.setItem("jb-fashions-token",s)):(localStorage.removeItem("jb-fashions-user"),localStorage.removeItem("jb-fashions-token"))},[r,s]),(0,a.jsx)(n.Provider,{value:{user:r,token:s,isAuthenticated:!!s,loading:c,login:(t,e)=>{l(t),i(e),f(!1)},logout:()=>{i(null),l(null),localStorage.removeItem("cartSynced")},updateUser:t=>{i(e=>e?{...e,...t}:e)},loginOpen:d,openLogin:()=>f(!0),closeLogin:()=>f(!1)},children:!c&&e})}function s(){let t=(0,o.useContext)(n);if(!t)throw Error("useAuth must be used within an AuthProvider");return t}},3405:function(t,e,r){r.d(e,{CartProvider:function(){return c},j:function(){return u}});var a=r(7437),o=r(2265),n=r(9116),i=r(446);let s=(0,o.createContext)(void 0),l=null;function c(t){let{children:e}=t,{token:r}=(0,i.a)(),[c,u]=(0,o.useState)([]);(0,o.useEffect)(()=>{let t=localStorage.getItem("jb-fashions-cart");t&&u(JSON.parse(t))},[]),(0,o.useEffect)(()=>{c.length>0?localStorage.setItem("jb-fashions-cart",JSON.stringify(c)):localStorage.removeItem("jb-fashions-cart")},[c]),(0,o.useEffect)(()=>{r&&d()},[r]);let d=async()=>{let t=JSON.parse(localStorage.getItem("jb-fashions-cart")||"[]");if(r&&0!==t.length&&"true"!==localStorage.getItem("cartSynced"))try{await n.Z.post("/cart/sync",{cart:t}),localStorage.setItem("cartSynced","true"),console.log("✅ Cart synced after login")}catch(t){console.error("❌ Cart sync failed",t)}},f=t=>{r&&(clearTimeout(l),l=setTimeout(async()=>{try{await n.Z.post("/cart/sync",{cart:t}),console.log("\uD83D\uDD04 Cart synced live")}catch(t){console.error("❌ Live sync failed",t)}},400))};return(0,a.jsx)(s.Provider,{value:{cart:c,addToCart:t=>{if(0===t.stock){alert("❌ This product is out of stock");return}u(e=>{let r;let a=e.find(e=>e.id===t.id&&e.variationId===t.variationId);if(a){if(a.quantity>=a.stock)return alert("⚠️ Only ".concat(a.stock," item(s) available")),e;r=e.map(e=>e.id===t.id&&e.variationId===t.variationId?{...e,quantity:e.quantity+1}:e)}else r=[...e,{...t,quantity:1}];return f(r),r})},removeFromCart:(t,e)=>{u(r=>{let a=r.filter(r=>!(r.id===t&&r.variationId===e));return f(a),a})},updateQuantity:(t,e,r)=>{u(a=>{let o=a.map(a=>a.id===t&&a.variationId===e?r>a.stock?(alert("⚠️ Only ".concat(a.stock," item(s) available")),a):{...a,quantity:Math.max(1,r)}:a);return f(o),o})},clearCart:()=>{u([]),localStorage.removeItem("jb-fashions-cart"),localStorage.removeItem("cartSynced")},getTotalItems:()=>c.reduce((t,e)=>t+e.quantity,0),getTotalPrice:()=>c.reduce((t,e)=>t+e.price*e.quantity,0)},children:e})}function u(){let t=(0,o.useContext)(s);if(!t)throw Error("useCart must be used within a CartProvider");return t}},8158:function(t,e,r){r.d(e,{E:function(){return c},T:function(){return l}});var a=r(7437),o=r(2265),n=r(9116),i=r(446);let s=(0,o.createContext)(null),l=t=>{let{children:e}=t,{isAuthenticated:r}=(0,i.a)(),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)(!1);(0,o.useEffect)(()=>{r?f():c([])},[r]);let f=async()=>{var t,e,r;try{d(!0);let e=await n.Z.get("/cart/get-wishlist");if((null===(t=e.data)||void 0===t?void 0:t.success)===!1){setError(e.data.message||"Failed to load wishlist"),c([]);return}c(e.data.data||[])}catch(t){(null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.message)||t.message,c([])}finally{d(!1)}},h=async t=>{try{await n.Z.post("/cart/wishlist-toggle",{product_id:t.id}),f()}catch(t){console.error("Wishlist toggle failed",t.message)}};return(0,a.jsx)(s.Provider,{value:{wishlist:l,toggleWishlist:h,isInWishlist:t=>l.some(e=>e.id===t),getWishlistCount:()=>l.length,clearWishlist:()=>c([]),loading:u},children:e})},c=()=>{let t=(0,o.useContext)(s);if(!t)throw Error("useWishlist must be used inside WishlistProvider");return t}},9116:function(t,e,r){let a=r(3464).Z.create({baseURL:"https://herbal-api.easybizcart.com/api",headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:1e4});a.interceptors.request.use(t=>{{let e=localStorage.getItem("jb-fashions-token");e&&(t.headers.Authorization="Bearer ".concat(e))}return t},t=>Promise.reject(t)),a.interceptors.response.use(t=>t,t=>{var e,r;return(null===(e=t.response)||void 0===e?void 0:e.status)===401&&console.warn("401 error detected from:",null===(r=t.config)||void 0===r?void 0:r.url),Promise.reject(t)}),e.Z=a},2660:function(t,e,r){r.d(e,{Z:function(){return a}});let a=(0,r(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8997:function(t,e,r){r.d(e,{Z:function(){return a}});let a=(0,r(9205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},6275:function(t,e,r){r.d(e,{Z:function(){return a}});let a=(0,r(9205).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])}}]);